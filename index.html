<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Weight‑Loss Tips — Adaptive Flashcards</title>
  <style>
    :root {
      --bg: #0b1220;
      --panel: #121b2e;
      --accent: #6ee7ff;
      --accent2: #a7f3d0;
      --text: #e6edf7;
      --muted: #9fb0c7;
      --danger: #ff6b6b;
      --success: #34d399;
      --warning: #fbbf24;
      --shadow: 0 10px 30px rgba(0,0,0,.35);
    }
    *{box-sizing:border-box}
    body{
      margin:0; font-family: system-ui, -apple-system, Segoe UI, Roboto, Inter, "Helvetica Neue", Arial, "Noto Sans", "Apple Color Emoji","Segoe UI Emoji";
      background: radial-gradient(1200px 800px at 10% -10%, #1a2440 0%, var(--bg) 40%), linear-gradient(#0a0f1e, #0b1220);
      color: var(--text);
      min-height:100svh; display:flex; align-items:center; justify-content:center; padding:24px;
    }
    .app{width: min(1080px, 100%);} 
    .card{background: linear-gradient(135deg, rgba(255,255,255,.06), rgba(255,255,255,.02)); backdrop-filter: blur(6px); border: 1px solid rgba(255,255,255,.08); border-radius: 18px; padding: 20px; box-shadow: var(--shadow);} 
    header{display:flex; align-items:center; gap:16px; margin-bottom:16px; flex-wrap:wrap}
    .brand{font-weight:700; letter-spacing:.2px}
    .pill{background: rgba(255,255,255,.06); border:1px solid rgba(255,255,255,.1); padding:6px 10px; border-radius:999px; font-size:12px; color:var(--muted);} 
    .grid{display:grid; grid-template-columns: 1fr; gap:14px}
    @media (min-width:860px){.grid{grid-template-columns: 2fr 1fr}}
    .panel{background: var(--panel); border:1px solid rgba(255,255,255,.06); border-radius:14px; padding:16px}
    h1{font-size: clamp(18px, 2.2vw, 24px); margin:0 0 6px}
    .q-meta{display:flex; gap:8px; flex-wrap:wrap; color:var(--muted); font-size:13px}
    .question{font-size: clamp(18px, 2.2vw, 22px); line-height:1.35; margin: 6px 0 8px}
    .options{display:grid; grid-template-columns: 1fr; gap:10px; margin-top:10px}
    .btn{width:100%; text-align:left; padding:12px 14px; border-radius:12px; border:1px solid rgba(255,255,255,.1); background:#0f1628; color:var(--text); cursor:pointer; transition: transform .03s ease, background .2s; box-shadow: inset 0 0 0 0 rgba(255,255,255,.05);} 
    .btn:hover{background:#121c33}
    .btn:active{transform: translateY(1px)}
    .btn.correct{border-color: rgba(52,211,153,.7); background: linear-gradient(0deg, rgba(52,211,153,.12), transparent)}
    .btn.wrong{border-color: rgba(255,107,107,.6); background: linear-gradient(0deg, rgba(255,107,107,.12), transparent)}
    .controls{display:flex; gap:10px; margin-top:12px; flex-wrap:wrap}
    .control{padding:10px 14px; border-radius:12px; border:1px solid rgba(255,255,255,.12); background:#0f172a; color:var(--text); cursor:pointer}
    .control.secondary{background:#0b1325}
    .hint{color:var(--accent2); font-size:14px; margin-top:6px; display:none}
    .hint.show{display:block}
    .stats{display:grid; grid-template-columns: repeat(2,1fr); gap:10px}
    .kpi{background:#0f172a; border:1px solid rgba(255,255,255,.08); border-radius:12px; padding:12px}
    .kpi .big{font-size:22px; font-weight:700}
    .tags{display:flex; flex-wrap:wrap; gap:6px; margin-top:6px}
    .tag{font-size:12px; padding:6px 8px; border-radius:999px; background: rgba(255,255,255,.06); border:1px solid rgba(255,255,255,.1); color:var(--muted)}
    .badge{display:flex; align-items:center; gap:8px; background:linear-gradient(180deg, rgba(167,243,208,.15), rgba(167,243,208,.05)); border:1px solid rgba(167,243,208,.25); color:#d1fae5; padding:10px 12px; border-radius:12px}
    .toast{position: fixed; inset:auto 16px 16px auto; background:#0b1325; border:1px solid rgba(255,255,255,.1); border-radius:12px; padding:10px 12px; color:var(--text); box-shadow: var(--shadow); display:none}
    .toast.show{display:block}
    .progress{height:8px; background:rgba(255,255,255,.1); border-radius:999px; overflow:hidden}
    .progress > div{height:100%; width:0%; background: linear-gradient(90deg, var(--accent), #b3e1ff);} 
    .heroImg{width:100%; height:160px; border-radius:12px; background: linear-gradient(135deg, #1e293b, #0b1220); border:1px solid rgba(255,255,255,.06); display:flex; align-items:center; justify-content:center; overflow:hidden}
    .heroImg svg{width:100%; height:100%; object-fit:cover}

    /* Modal */
    .modal{position:fixed; inset:0; display:flex; align-items:center; justify-content:center; background:rgba(0,0,0,.6); backdrop-filter: blur(3px);} 
    .sheet{width:min(520px, 92%); background:var(--panel); border:1px solid rgba(255,255,255,.12); border-radius:16px; padding:18px; box-shadow: var(--shadow)}
    .row{display:flex; gap:10px; align-items:center; margin:8px 0}
    label{font-size:14px; color:var(--muted)}
    input[type="text"]{width:100%; padding:10px 12px; border-radius:10px; border:1px solid rgba(255,255,255,.15); background:#0f172a; color:var(--text)}
  </style>
</head>
<body>
  <div class="app">
    <div class="card">
      <header>
        <div class="brand">💪 Patient‑Friendly Weight‑Loss Flashcards</div>
        <span class="pill" id="userPill">👤 Guest</span>
        <span class="pill" id="streakPill">🔥 Streak: 0</span>
        <span class="pill" id="accuracyPill">✅ Accuracy: 0%</span>
        <span class="pill" id="badgePill">🏅 Badges: 0</span>
        <button class="pill" id="settingsBtn" title="Profile">⚙️ Settings</button>
      </header>
      <div class="grid">
        <!-- Left: Flashcard panel -->
        <div class="panel" aria-live="polite">
          <div class="heroImg" aria-hidden="true" id="hero">
            <!-- Inline SVG illustration (nutrition/activity theme) -->
            <svg viewBox="0 0 600 180" xmlns="http://www.w3.org/2000/svg" role="img" aria-label="Healthy lifestyle illustration">
              <defs>
                <linearGradient id="g1" x1="0" y1="0" x2="1" y2="1"><stop offset="0" stop-color="#6ee7ff"/><stop offset="1" stop-color="#a7f3d0"/></linearGradient>
              </defs>
              <rect width="600" height="180" fill="#0e1629"/>
              <circle cx="90" cy="90" r="55" fill="url(#g1)" opacity=".25"/>
              <rect x="60" y="65" width="60" height="50" rx="10" fill="url(#g1)" opacity=".5"/>
              <rect x="200" y="50" width="90" height="80" rx="12" fill="#1f2a44" stroke="#6ee7ff" opacity=".8"/>
              <rect x="215" y="65" width="60" height="10" rx="5" fill="#6ee7ff"/>
              <rect x="215" y="85" width="60" height="10" rx="5" fill="#a7f3d0"/>
              <rect x="215" y="105" width="60" height="10" rx="5" fill="#6ee7ff"/>
              <g transform="translate(350,40)">
                <path d="M0 60 C20 30, 40 90, 60 60" stroke="#a7f3d0" stroke-width="6" fill="none"/>
                <circle cx="0" cy="60" r="5" fill="#a7f3d0"/>
                <circle cx="60" cy="60" r="5" fill="#6ee7ff"/>
              </g>
              <g transform="translate(470,40)">
                <rect x="0" y="0" width="100" height="80" rx="12" fill="#1f2a44" stroke="#a7f3d0"/>
                <rect x="10" y="50" width="80" height="20" rx="10" fill="#6ee7ff"/>
              </g>
            </svg>
          </div>
          <div class="q-meta">
            <span id="qIndex">Question 1 / 100</span>
            <span>•</span>
            <span id="refs">Refs: –</span>
          </div>
          <h1 class="question" id="question">Loading…</h1>
          <div class="progress" aria-hidden="true"><div id="progressBar"></div></div>
          <div class="options" id="options"></div>
          <div id="hint" class="hint">Hint will appear here.</div>
          <div class="controls">
            <button class="control" id="hintBtn">💡 Hint</button>
            <button class="control secondary" id="skipBtn">⏭️ Skip</button>
            <button class="control" id="nextBtn" disabled>Next ▶</button>
            <button class="control secondary" id="resetBtn" title="Erase local progress">🗑️ Reset</button>
          </div>
        </div>
        <!-- Right: Stats/Badges/Techniques -->
        <div class="panel">
          <h2 style="margin:0 0 8px; font-size:18px">Your Progress</h2>
          <div class="stats">
            <div class="kpi"><div class="big" id="kpiCorrect">0</div><div>Correct</div></div>
            <div class="kpi"><div class="big" id="kpiTotal">0</div><div>Answered</div></div>
          </div>
          <div class="tags" id="badges" style="margin-top:10px"></div>
          <div style="margin-top:12px" class="badge" id="sessionBadge" hidden>
            <span>🎉 New Badge:</span> <strong id="badgeName">Starter</strong>
          </div>
          <h3 style="margin:16px 0 6px; font-size:16px">Techniques Used</h3>
          <ul class="tech-list" style="margin:0 0 6px 18px; color:var(--muted); line-height:1.55">
            <li><strong>Spaced practice</strong>: missed cards reappear after a short gap.</li>
            <li><strong>Adaptive difficulty</strong>: streaks promote; errors resurface soon.</li>
            <li><strong>Hints on demand</strong>: gentle scaffolding before answers.</li>
            <li><strong>Environment design</strong>: label reading, smaller plates, kitchen‑serve.</li>
            <li><strong>Positive feedback</strong>: badges, streaks, small wins.</li>
            <li><strong>Micro‑sessions</strong>: quick 5–10 card bursts to reduce friction.</li>
            <li><strong>Local privacy</strong>: stored in this browser only.</li>
          </ul>
        </div>
      </div>
    </div>
  </div>

  <!-- Profile (name only) -->
  <div class="modal" id="profileModal" hidden>
    <div class="sheet">
      <h2 style="margin:0 0 8px; font-size:20px">Welcome</h2>
      <p style="margin:0 0 10px; color:var(--muted)">Please enter your display name. This is saved only on this device.</p>
      <div class="row"><label for="name">Display name</label></div>
      <div class="row"><input id="name" type="text" placeholder="e.g., Guest" autocomplete="name" /></div>
      <div class="row" style="justify-content:flex-end; gap:8px">
        <button class="control" id="saveProfile">Save</button>
      </div>
    </div>
  </div>

  <div id="toast" class="toast" role="status" aria-live="polite"></div>

  <script>
    // --- Tiny sound feedback ---
    const beep = (freq=880, type='sine', dur=0.08, gain=0.05) => {
      try{ const ctx = new (window.AudioContext||window.webkitAudioContext)();
        const o = ctx.createOscillator(); const g = ctx.createGain();
        o.type = type; o.frequency.value = freq; g.gain.value = gain; o.connect(g); g.connect(ctx.destination);
        o.start(); setTimeout(()=>{o.stop(); ctx.close();}, dur*1000);
      }catch(e){}
    };

    // --- Question bank (100) — neutral scenarios (no personal names)
    const BANK = [
      {id:1, question:"Setting a goal of losing 20 pounds in two weeks is realistic.", options:["True","False"], correctIndex:1, hint:"Healthy pace: ~1–2 lb/week.", reference:[1,2,3]},
      {id:2, question:"What’s a healthier weight loss target?", options:["1–2 pounds per week","5–10 pounds per week","As fast as possible"], correctIndex:0, hint:"Slow and steady wins.", reference:[1,2,3]},
      {id:3, question:"Someone wants to 'eat healthier'. Which is a SMART goal?", options:["Eat 1 cup of vegetables at lunch daily this week","Try to be better","Skip goals and see"], correctIndex:0, hint:"Specific + time‑bound.", reference:[4,5]},
      {id:4, question:"What’s one benefit of tracking food daily?", options:["Notice patterns","Guarantees weight loss","Makes food taste better"], correctIndex:0, hint:"Awareness → change.", reference:[4,5,6]},
      {id:5, question:"Weighing once a month is the best way to track progress.", options:["True","False"], correctIndex:1, hint:"Weekly or more gives feedback.", reference:[4,5,6]},
      {id:6, question:"Someone forgot to log lunch for 3 days. Best next step?", options:["Quit tracking","Restart today","Wait until next week"], correctIndex:1, hint:"Perfection not required.", reference:[4,5,6]},
      {id:7, question:"One easy way to reduce portion sizes is to…", options:["Use a smaller plate","Eat from the package","Skip vegetables"], correctIndex:0, hint:"Visual cues matter.", reference:[4,7]},
      {id:8, question:"Which food is ultraprocessed?", options:["Apple","Chips","Brown rice"], correctIndex:1, hint:"Often bag/box + additives.", reference:[4,7]},
      {id:9, question:"At a buffet, a simple strategy to prevent overeating is…", options:["Serve once from the kitchen","Pile food high","Skip veggies for dessert"], correctIndex:0, hint:"Distance helps.", reference:[4,7]},
      {id:10, question:"Which should you aim to increase?", options:["Fruits & vegetables","Sugary drinks","Fried foods"], correctIndex:0, hint:"Fiber + nutrients help.", reference:[4,7]},
      {id:11, question:"Skipping breakfast always helps with weight loss.", options:["True","False"], correctIndex:1, hint:"Consistency often wins.", reference:[5]},
      {id:12, question:"Planning snacks ahead helps prevent…", options:["Impulse eating","Hunger","Drinking water"], correctIndex:0, hint:"Plan beats impulse.", reference:[5]},
      {id:13, question:"Someone eats dinner with TV on and overeats. Best fix?", options:["Turn off screens & eat mindfully","Eat faster","Skip dinner"], correctIndex:0, hint:"Focus on the meal.", reference:[4,5]},
      {id:14, question:"Healthier plate size to use is…", options:["10 inches","12 inches","Bigger is better"], correctIndex:0, hint:"Smaller plate → smaller portions.", reference:[4,5]},
      {id:15, question:"Recommended moderate aerobic activity per week is…", options:["≥150 minutes","≥60 minutes","None if you lift"], correctIndex:0, hint:"Think 30 min × 5 days.", reference:[1,5]},
      {id:16, question:"Only resistance training matters for weight loss.", options:["True","False"], correctIndex:1, hint:"Cardio + strength together.", reference:[4,5]},
      {id:17, question:"A person sits all day. Small change to move more?", options:["Stand/walk breaks hourly","Skip lunch","Drink soda"], correctIndex:0, hint:"Break up sitting.", reference:[4,5]},
      {id:18, question:"Which counts as resistance training?", options:["Resistance bands at home","Walking only","TV remote reps"], correctIndex:0, hint:"Bands or weights work.", reference:[4,5]},
      {id:19, question:"Why does sleep matter for weight?", options:["It affects hunger hormones","It burns 1000 kcal/hour","It doesn’t matter"], correctIndex:0, hint:"Poor sleep → cravings.", reference:[4]},
      {id:20, question:"Stress has no effect on eating habits.", options:["True","False"], correctIndex:1, hint:"Stress can drive snacking.", reference:[4]},
      {id:21, question:"A person stress‑snacks nightly. Healthier coping?", options:["Meditation/walk/tea","Skip meals all day","Keep snacks by bed"], correctIndex:0, hint:"Swap the cue response.", reference:[4]},
      {id:22, question:"Adults should aim for how many hours of sleep?", options:["7–9 hours","4–5 hours","10–12 hours"], correctIndex:0, hint:"Most do best 7–9.", reference:[4]},
      {id:23, question:"Eat until you’re ____, not stuffed.", options:["satisfied","curious","sleepy"], correctIndex:0, hint:"Comfortable, not full.", reference:[4,5]},
      {id:24, question:"Eating slowly can help you feel satisfied with less.", options:["True","False"], correctIndex:0, hint:"Give fullness time to register.", reference:[4,5]},
      {id:25, question:"A person eats dessert when sad. First step?", options:["Notice trigger & plan a swap","Hide scale","Skip breakfast"], correctIndex:0, hint:"Name the feeling, pick an action.", reference:[4,5]},
      {id:26, question:"Which helps with mindful eating?", options:["Chew thoroughly","Eat while scrolling","Race to finish"], correctIndex:0, hint:"Slow + present.", reference:[4,5]},
      {id:27, question:"Joining a support group can improve success.", options:["True","False"], correctIndex:0, hint:"Accountability helps.", reference:[3,6]},
      {id:28, question:"Friends push fast food. Stay on track by…", options:["Suggesting a healthier spot","Skipping social life","Ordering two meals"], correctIndex:0, hint:"Plan & advocate.", reference:[3,6]},
      {id:29, question:"Who can help with meal planning?", options:["Registered dietitian","Random influencer","No one"], correctIndex:0, hint:"Seek credentialed help.", reference:[1,5]},
      {id:30, question:"Involving family/friends makes it __ to stick to habits.", options:["easier","harder","impossible"], correctIndex:0, hint:"Social support matters.", reference:[3,6]},
      {id:31, question:"Serving from the kitchen (not table) helps because…", options:["Food is less tempting","It’s trendier","Plates get bigger"], correctIndex:0, hint:"Out of sight, out of mind.", reference:[4,5]},
      {id:32, question:"Keeping unhealthy snacks at home makes them harder to eat.", options:["True","False"], correctIndex:1, hint:"Availability drives intake.", reference:[5]},
      {id:33, question:"Shopping while hungry leads to chips. Fix?", options:["Eat a snack & bring a list","Wander aisles hungry","Buy extra treats"], correctIndex:0, hint:"Plan before you go.", reference:[5]},
      {id:34, question:"Why shop with a list?", options:["Fewer impulse buys","It’s fun","You walk less"], correctIndex:0, hint:"Pre‑decide healthy picks.", reference:[5]},
      {id:35, question:"Which nutrient should you increase?", options:["Fiber","Added sugar","Sodium"], correctIndex:0, hint:"Fiber supports fullness.", reference:[8]},
      {id:36, question:"Reading nutrition labels helps healthier choices.", options:["True","False"], correctIndex:0, hint:"Know what’s inside.", reference:[5]},
      {id:37, question:"Which is a lean protein?", options:["Skinless chicken","Bacon","Sausage"], correctIndex:0, hint:"Lower fat, good protein.", reference:[5]},
      {id:38, question:"Best drink for weight management?", options:["Water","Soda","Juice"], correctIndex:0, hint:"Liquid calories add up.", reference:[5]},
      {id:39, question:"Preparing meals at home helps you…", options:["Control ingredients","Spend more by default","Eat mindlessly"], correctIndex:0, hint:"You control portions.", reference:[4,5]},
      {id:40, question:"Eating out daily is the best way to control calories.", options:["True","False"], correctIndex:1, hint:"Restaurants add extras.", reference:[4,5]},
      {id:41, question:"Healthier cooking method:", options:["Baking","Deep‑frying","Double frying"], correctIndex:0, hint:"Less oil = fewer calories.", reference:[5]},
      {id:42, question:"Late‑night takeout habit. Healthier change?", options:["Prep bulk meals & freeze","Skip all carbs","Only drink coffee"], correctIndex:0, hint:"Make healthy default easy.", reference:[5]},
      {id:43, question:"Non‑food reward after a goal?", options:["New workout playlist","Cake","Milkshake"], correctIndex:0, hint:"Celebrate without calories.", reference:[4,5]},
      {id:44, question:"Celebrating milestones can boost motivation.", options:["True","False"], correctIndex:0, hint:"Wins fuel effort.", reference:[4,5]},
      {id:45, question:"Feeling discouraged after a setback. Healthy response?", options:["Reflect & adjust plan","Quit","Crash diet tomorrow"], correctIndex:0, hint:"Progress isn’t linear.", reference:[4,5]},
      {id:46, question:"Why reassess goals regularly?", options:["Needs change over time","It’s pointless","To add pressure only"], correctIndex:0, hint:"Adapt to life.", reference:[1,2]},
      {id:47, question:"Who to consult before very‑low‑calorie diets?", options:["Clinician/dietitian","A stranger online","No one"], correctIndex:0, hint:"Safety first.", reference:[1,2,4]},
      {id:48, question:"Weight‑loss supplements are safe and effective.", options:["True","False"], correctIndex:1, hint:"Often unproven, risky.", reference:[1,2]},
      {id:49, question:"When consider weight‑loss meds?", options:["If clinically indicated","Everyone should","Never"], correctIndex:0, hint:"Discuss with clinician.", reference:[1,8]},
      {id:50, question:"Bariatric surgery is an option for…", options:["Some with severe obesity","Everyone","No one"], correctIndex:0, hint:"Specific criteria apply.", reference:[1,5]},
      {id:51, question:"SMART stands for…", options:["Specific, Measurable, Achievable, Relevant, Time‑bound","Simple, Magic, Awesome, Rapid, Trendy","Snack, Move, Avoid, Rest, Track"], correctIndex:0, hint:"Project‑style goals.", reference:[4,5]},
      {id:52, question:"Fad diets are usually best long‑term.", options:["True","False"], correctIndex:1, hint:"Sustainability wins.", reference:[1,2,5]},
      {id:53, question:"Regained 5 lb after loss. Good step?", options:["Review triggers & plan","Give up","Starve next day"], correctIndex:0, hint:"Relapse planning.", reference:[3]},
      {id:54, question:"Why reflect on setbacks?", options:["Learn & adjust","Punish yourself","Ignore them"], correctIndex:0, hint:"Data → better plan.", reference:[4,5]},
      {id:55, question:"Healthier choice:", options:["Take stairs","Elevator always","Moving walkway"], correctIndex:0, hint:"NEAT adds up.", reference:[4,5]},
      {id:56, question:"Parking farther away can help you move more.", options:["True","False"], correctIndex:0, hint:"Sneak in steps.", reference:[4,5]},
      {id:57, question:"Sits 8 hours straight. What to change?", options:["Break sitting every hour","Keep sitting","Drink more soda"], correctIndex:0, hint:"Breaks matter.", reference:[4,5]},
      {id:58, question:"Drinking water before meals can help with…", options:["Fullness","Hunger","Thirst only"], correctIndex:0, hint:"Arrive less hungry.", reference:[5]},
      {id:59, question:"Benefit of a wearable tracker?", options:["Feedback on activity","Automatically cooks","None"], correctIndex:0, hint:"What gets measured…", reference:[4,5]},
      {id:60, question:"Digital health tools can support weight management.", options:["True","False"], correctIndex:0, hint:"Apps can aid habits.", reference:[6]},
      {id:61, question:"Way to monitor activity:", options:["Step count","Guessing","Astrology"], correctIndex:0, hint:"Objective beats guess.", reference:[5]},
      {id:62, question:"Only 3,000 steps today. Next step?", options:["Plan a short evening walk","Give up for week","Eat extra to compensate"], correctIndex:0, hint:"Small wins now.", reference:[5]},
      {id:63, question:"Which should you limit?", options:["Processed meats","Vegetables","Whole grains"], correctIndex:0, hint:"Linked to health risks.", reference:[5]},
      {id:64, question:"Herbs/spices can add flavor without many calories.", options:["True","False"], correctIndex:0, hint:"Boost taste, not kcal.", reference:[5]},
      {id:65, question:"Higher‑calorie condiment:", options:["Ketchup","Mustard","Salsa"], correctIndex:0, hint:"Watch added sugar.", reference:[5]},
      {id:66, question:"Someone drinks alcohol daily. Healthier alternative?", options:["Sparkling water with lime","Drink more","Shots instead"], correctIndex:0, hint:"Cut liquid calories.", reference:[5]},
      {id:67, question:"Why focus on nutrient density?", options:["More nutrients per calorie","More calories per bite","It’s a buzzword only"], correctIndex:0, hint:"Quality over quantity.", reference:[5]},
      {id:68, question:"Eating with others can improve accountability.", options:["True","False"], correctIndex:0, hint:"Social support again.", reference:[3,6]},
      {id:69, question:"Self‑efficacy means…", options:["Belief you can do the behavior","A specific diet","Gym membership"], correctIndex:0, hint:"Confidence to act.", reference:[3,6]},
      {id:70, question:"Trying meditation to reduce stress eating addresses…", options:["Stress management","Protein intake","Sodium"], correctIndex:0, hint:"Lower stress → fewer cravings.", reference:[4]},
      {id:71, question:"Benefit of adjusting your plan as needed?", options:["Stay realistic & effective","Seems indecisive","Avoid all change"], correctIndex:0, hint:"Adaptation helps.", reference:[1,2]},
      {id:72, question:"Long‑term sustainable habits beat quick fixes.", options:["True","False"], correctIndex:0, hint:"Think lifestyle.", reference:[1,2,5]},
      {id:73, question:"Why avoid restrictive fad diets?", options:["Hard to sustain & regain risk","They always work","They’re safest"], correctIndex:0, hint:"Sustainability again.", reference:[1,2,5]},
      {id:74, question:"Hit a plateau. Healthy next step?", options:["Review intake/activity/sleep","Crash diet","Quit"], correctIndex:0, hint:"Adjust one lever.", reference:[4,5]},
      {id:75, question:"Adults should sleep…", options:["7–9 hours/night","3–4 hours/night","11–12 hours/night"], correctIndex:0, hint:"Recovery matters.", reference:[4]},
      {id:76, question:"Why review medications during weight loss?", options:["Some affect weight","For fun","No reason"], correctIndex:0, hint:"Ask clinician.", reference:[2,4]},
      {id:77, question:"Managing chronic conditions is unrelated to weight.", options:["True","False"], correctIndex:1, hint:"Whole health connects.", reference:[1,2]},
      {id:78, question:"Role of regular follow‑up?", options:["Accountability & guidance","None","Only weigh you"], correctIndex:0, hint:"Stay supported.", reference:[1,2]},
      {id:79, question:"Healthier grain choice:", options:["Brown rice","White bread","Pastry"], correctIndex:0, hint:"Choose whole grains.", reference:[4,5]},
      {id:80, question:"Shopping while hungry increases impulse buys.", options:["True","False"], correctIndex:0, hint:"Eat first, then shop.", reference:[5]},
      {id:81, question:"Chips visible on counter. Better option?", options:["Keep fruit visible, chips away","Buy more chips","Move chips to desk"], correctIndex:0, hint:"Environment design.", reference:[5]},
      {id:82, question:"Why freeze leftovers?", options:["Easy healthy meals later","Waste more food","Add calories"], correctIndex:0, hint:"Make healthy the default.", reference:[5]},
      {id:83, question:"Positive self‑talk can help you stay on track.", options:["True","False"], correctIndex:0, hint:"Mindset matters.", reference:[4,5]},
      {id:84, question:"Non‑food milestone idea:", options:["New water bottle","Cake slice","Sugary drink"], correctIndex:0, hint:"Reward supports goal.", reference:[4,5]},
      {id:85, question:"“I’ll never succeed.” Healthier phrase?", options:["“I can improve with practice”","“I’m doomed”","“Why bother”"], correctIndex:0, hint:"Growth mindset.", reference:[4,5]},
      {id:86, question:"Why celebrate small wins?", options:["Builds momentum","Wastes time","Increases cravings"], correctIndex:0, hint:"Motivation fuel.", reference:[4,5]},
      {id:87, question:"Better for health:", options:["Break up sitting with short walks","Sit long hours","Avoid moving"], correctIndex:0, hint:"Movement snacks.", reference:[4,5]},
      {id:88, question:"Walking after meals can improve health.", options:["True","False"], correctIndex:0, hint:"Helps glucose & steps.", reference:[5]},
      {id:89, question:"Everyday habit to increase steps:", options:["Park farther away","Use escalator always","Drive everywhere"], correctIndex:0, hint:"NEAT again.", reference:[4,5]},
      {id:90, question:"Exercise feels boring. Strategy?", options:["Try new enjoyable activities","Force same routine","Stop entirely"], correctIndex:0, hint:"Enjoyment → adherence.", reference:[5]},
      {id:91, question:"Unproven weight‑loss therapies are safe.", options:["True","False"], correctIndex:1, hint:"Be skeptical.", reference:[1,2]},
      {id:92, question:"Why rely on evidence‑based resources?", options:["Safer, more effective","Trendy","Cheaper always"], correctIndex:0, hint:"Trust quality sources.", reference:[1,2,3]},
      {id:93, question:"Risk of weight‑loss supplements:", options:["Side effects & interactions","Guaranteed results","Zero risk"], correctIndex:0, hint:"Discuss with clinician.", reference:[1,2]},
      {id:94, question:"Fad diet on social media. What do you do?", options:["Check credible sources/ask clinician","Follow blindly","Buy all products"], correctIndex:0, hint:"Verify first.", reference:[1,2,3]},
      {id:95, question:"Why review progress regularly?", options:["Spot trends & adjust","For stress","No benefit"], correctIndex:0, hint:"Course‑correct often.", reference:[4,5]},
      {id:96, question:"Weight management is a one‑time event.", options:["True","False"], correctIndex:1, hint:"It’s ongoing.", reference:[1,2]},
      {id:97, question:"Way to stay motivated long term:", options:["Set new realistic goals","Rely on willpower only","Avoid tracking"], correctIndex:0, hint:"Goals guide effort.", reference:[1,2]},
      {id:98, question:"Reached goal weight. Next step?", options:["Plan maintenance habits & follow‑ups","Stop all habits","Party daily"], correctIndex:0, hint:"Maintain gains.", reference:[1,2]},
      {id:99, question:"Benefit of food diary after reaching goals:", options:["Maintain awareness","No benefit","Adds calories"], correctIndex:0, hint:"Keep insight.", reference:[4,5]},
      {id:100, question:"Why is regular follow‑up key?", options:["Support & accountability","No reason","Only for athletes"], correctIndex:0, hint:"Care team matters.", reference:[1,2]}
    ];

    // --- Minimal image hue-rotation for hero banner each question ---
    const hero = document.getElementById('hero');
    function swapHero(){ hero.style.filter = `hue-rotate(${Math.floor(Math.random()*180)}deg)`; }

    // --- Local Profile (name only) ---
    const profileKey = 'wl_profile_v1';
    const getProfile = ()=>{ try{ return JSON.parse(localStorage.getItem(profileKey)||'null'); }catch{ return null } };
    const setProfile = (p)=> localStorage.setItem(profileKey, JSON.stringify(p));

    // --- Game state (adaptive queue) ---
    let queue = [...BANK.map((_, i)=>i)];
    let currentIndex = 0; let answered = 0, correct = 0, streak = 0; let badges = [];
    const stateKey = 'wl_flashcards_state_v2';

    function saveState(){ const s = {queue,currentIndex,answered,correct,streak,badges}; localStorage.setItem(stateKey, JSON.stringify(s)); }
    function loadState(){ try{ const raw = localStorage.getItem(stateKey); if(!raw) return; const s=JSON.parse(raw); if(Array.isArray(s.queue)){ queue=s.queue; currentIndex=s.currentIndex||0; answered=s.answered||0; correct=s.correct||0; streak=s.streak||0; badges=s.badges||[]; } }catch{} }

    // --- UI bindings ---
    const elQ = document.getElementById('question');
    const elOpts = document.getElementById('options');
    const elRefs = document.getElementById('refs');
    const elQIndex = document.getElementById('qIndex');
    const elHint = document.getElementById('hint');
    const elHintBtn = document.getElementById('hintBtn');
    const elSkip = document.getElementById('skipBtn');
    const elNext = document.getElementById('nextBtn');
    const elReset = document.getElementById('resetBtn');
    const elToast = document.getElementById('toast');
    const elProgress = document.getElementById('progressBar');
    const elKpiCorrect = document.getElementById('kpiCorrect');
    const elKpiTotal = document.getElementById('kpiTotal');
    const elStreak = document.getElementById('streakPill');
    const elAcc = document.getElementById('accuracyPill');
    const elBadgePill = document.getElementById('badgePill');
    const elBadges = document.getElementById('badges');
    const elSesBadge = document.getElementById('sessionBadge');
    const elBadgeName = document.getElementById('badgeName');
    const settingsBtn = document.getElementById('settingsBtn');

    function toast(msg){ elToast.textContent = msg; elToast.classList.add('show'); setTimeout(()=> elToast.classList.remove('show'), 1300); }
    function award(name){ if(!badges.includes(name)){ badges.push(name); elBadgeName.textContent = name; elSesBadge.hidden=false; setTimeout(()=>{elSesBadge.hidden=true;}, 1800); renderBadges(); saveState(); } }
    function renderBadges(){ elBadges.innerHTML = ''; badges.forEach(b => { const span = document.createElement('span'); span.className = 'tag'; span.textContent = '🏅 ' + b; elBadges.appendChild(span); }); elBadgePill.textContent = `🏅 Badges: ${badges.length}`; }
    function updateKpis(){ elKpiCorrect.textContent = correct; elKpiTotal.textContent = answered; const acc = answered ? Math.round((correct/answered)*100) : 0; elAcc.textContent = `✅ Accuracy: ${acc}%`; elStreak.textContent = `🔥 Streak: ${streak}`; const pct = Math.round(((queue.length - currentIndex) / queue.length) * 100); elProgress.style.width = `${100 - pct}%`; }

    function render(){
      swapHero();
      const idx = queue[currentIndex]; const item = BANK[idx];
      elQ.textContent = item.question; elRefs.textContent = 'Refs: ' + (item.reference?.join(', ') || '—'); elQIndex.textContent = `Question ${idx+1} / ${BANK.length}`; elHint.textContent = item.hint || ''; elHint.classList.remove('show'); elNext.disabled = true; elOpts.innerHTML = '';
      item.options.forEach((opt, i)=>{ const b = document.createElement('button'); b.className = 'btn'; b.textContent = opt; b.setAttribute('aria-label', `Option ${i+1}: ${opt}`); b.addEventListener('click', ()=> onAnswer(i)); elOpts.appendChild(b); });
      updateKpis();
    }

    function onAnswer(choice){
      const idx = queue[currentIndex]; const item = BANK[idx]; const buttons = [...elOpts.querySelectorAll('button')];
      buttons.forEach(b => b.disabled = true); answered++;
      if(choice === item.correctIndex){ correct++; streak++; buttons[choice].classList.add('correct'); beep(1040,'sine',0.07,0.06); toast('✅ Correct!'); if(correct===1) award('First Win'); if(streak===3) award('On a Roll (x3)'); if(streak===5) award('Hot Streak (x5)'); if(correct>=25 && !badges.includes('25 Correct')) award('25 Correct'); if(correct>=50 && !badges.includes('50 Correct')) award('50 Correct'); if(correct>=100 && !badges.includes('Century Club')) award('Century Club'); elNext.disabled = false; }
      else { streak = 0; buttons[choice].classList.add('wrong'); const right = item.correctIndex; buttons[right]?.classList.add('correct'); beep(200,'square',0.08,0.05); toast('❌ Try again soon'); const reinsertAt = Math.min(queue.length, currentIndex + 5); queue.splice(reinsertAt, 0, idx); elNext.disabled = false; }
      saveState(); updateKpis();
    }

    function next(){ if(currentIndex < queue.length-1){ currentIndex++; } else { currentIndex = Math.min(currentIndex, queue.length-1); } saveState(); render(); }

    document.getElementById('hintBtn').addEventListener('click', ()=>{ elHint.classList.add('show'); });
    document.getElementById('skipBtn').addEventListener('click', ()=>{ streak = 0; next();});
    document.getElementById('nextBtn').addEventListener('click', next);
    document.getElementById('resetBtn').addEventListener('click', ()=>{ if(confirm('Erase local progress and restart?')){ localStorage.removeItem(stateKey); answered=0; correct=0; streak=0; badges=[]; queue=[...BANK.map((_, i)=>i)]; currentIndex=0; renderBadges(); updateKpis(); render(); } });

    // --- Profile (name only) ---
    const profileModal = document.getElementById('profileModal');
    const nameInput = document.getElementById('name');
    const saveProfileBtn = document.getElementById('saveProfile');
    const userPill = document.getElementById('userPill');

    function openProfile(){ profileModal.hidden = false; nameInput.value = (getProfile()?.name || ''); }
    document.getElementById('settingsBtn').addEventListener('click', openProfile);

    saveProfileBtn.addEventListener('click', ()=>{ const name = nameInput.value.trim() || 'Guest'; setProfile({name}); userPill.textContent = '👤 ' + name; profileModal.hidden = true; });

    // --- Init ---
    (function init(){
      const p = getProfile();
      if(!p){ profileModal.hidden = false; }
      else { userPill.textContent = '👤 ' + (p.name || 'Guest'); }
      loadState();
      renderBadges();
      render();
    })();
  </script>
</body>
</html>

